# å¤æ‚åº¦åˆ†æä¹‹å››ç§æ—¶é—´å¤æ‚åº¦åˆ†æ

## ç®€è¨€

* æœ¬èŠ‚ä¸»è¦å…³æ³¨å››ç§æ—¶é—´å¤æ‚åº¦åˆ†æçš„çŸ¥è¯†ç‚¹ã€‚

## æœ€å¥½ã€æœ€åæƒ…å†µæ—¶é—´å¤æ‚åº¦

* ä¸‹é¢è¿™æ®µä»£ç çš„æ—¶é—´å¤æ‚åº¦å¾ˆå®¹æ˜“ç¡®è®¤ï¼Œå°±æ˜¯ `O(n)`ã€‚

```typescript
/**
 * æŸ¥æ‰¾ç›¸ç­‰é¡¹çš„ç´¢å¼•
 * @param arr 
 * @param n 
 * @param x 
 * @returns 
 */
function find(arr: any[], x: any): number {
  let pos = -1;
  for (let i = 0; i < arr.length; i++) {
    if (arr[i] === x) {
      pos = i;
    }
  }
  return pos;
}
```

* ä½†å‡å¦‚æˆ‘ä»¬å¯¹ä»£ç è¿›è¡Œä¸€éƒ¨åˆ†ä¼˜åŒ–ï¼Œåˆ™å®ƒçš„å¤æ‚åº¦åˆ†æå°†å˜å¾—ç¨ç¨å¤æ‚ä¸€äº›ã€‚

```typescript
/**
 * æŸ¥æ‰¾ç›¸ç­‰é¡¹çš„ç´¢å¼•
 * @param arr 
 * @param n 
 * @param x 
 * @returns 
 */
function find(arr: any[], x: any): number {
  let pos = -1;
  for (let i = 0; i < arr.length; i++) {
    if (arr[i] === x) {
      pos = i;
      break;
    }
  }
  return pos;
}
```

* åœ¨æ‰¾åˆ°ç›¸åŒé¡¹ä¹‹åï¼Œå¾ªç¯å°±ä¼šåœæ­¢ï¼Œå› æ­¤ç¬¬ä¸€ä¸ªæ‰¾åˆ°å’Œæœ€åä¸€ä½æ‰¾åˆ°çš„ç»“æœå¯èƒ½ä¼šç›¸å·®å¾ˆå¤šã€‚
* ä¸ºäº†è¡¨ç¤ºä»£ç åœ¨ä¸åŒæƒ…å†µä¸‹çš„ä¸åŒæ—¶é—´å¤æ‚åº¦ï¼Œæˆ‘ä»¬å¼•å…¥ä¸‰ä¸ªæ¦‚å¿µï¼Œ**æœ€å¥½æƒ…å†µæ—¶é—´å¤æ‚åº¦ã€æœ€åæƒ…å†µæ—¶é—´å¤æ‚åº¦ï¼Œå¹³å‡æƒ…å†µæ—¶é—´å¤æ‚åº¦ã€‚**

### æœ€å¥½æƒ…å†µæ—¶é—´å¤æ‚åº¦

* **æœ€å¥½æƒ…å†µæ—¶é—´å¤æ‚åº¦ï¼šåœ¨æœ€ç†æƒ³çš„æƒ…å†µä¸‹ï¼Œæ‰§è¡Œè¿™æ®µä»£ç çš„æ—¶é—´å¤æ‚åº¦ã€‚**
	* å¯¹åº”åˆ°ä¸Šæ–‡çš„ä»£ç ï¼Œå°±æ˜¯åœ¨æ•°ç»„çš„ç¬¬ä¸€ä¸ªä½ç½®æŸ¥æ‰¾åˆ°å…ƒç´ çš„åœºæ™¯ã€‚

### æœ€åæƒ…å†µæ—¶é—´å¤æ‚åº¦

* **æœ€åæƒ…å†µæ—¶é—´å¤æ‚åº¦ï¼šåœ¨æœ€ç³Ÿç³•çš„æƒ…å†µä¸‹ï¼Œæ‰§è¡Œè¿™æ®µä»£ç çš„æ—¶é—´å¤æ‚åº¦ã€‚**
	* å¦‚æœæ•°ç»„ä¸­æ²¡æœ‰æˆ‘ä»¬æ‰€è¦æŸ¥æ‰¾çš„å˜é‡ï¼Œé‚£ä¹ˆå°±éœ€è¦æŠŠæ•°ç»„å†…çš„æ‰€æœ‰å…ƒç´ éƒ½éå†ä¸€éã€‚æœ€åæƒ…å†µå°±å¯¹åº”ç€è¿™ç±»åœºæ™¯ã€‚

## å¹³å‡æ—¶é—´å¤æ‚åº¦

* *ä¸Šæ–‡æåˆ°çš„æœ€å¥½æƒ…å†µæ—¶é—´å¤æ‚åº¦å’Œæœ€åæƒ…å†µæ—¶é—´å¤æ‚åº¦å®é™…ä¸Šéƒ½æ˜¯æç«¯æƒ…å†µä¸‹çš„ä»£ç å¤æ‚åº¦ï¼Œå‘ç”Ÿçš„æ¦‚ç‡å…¶å®å¹¶ä¸å¤§ã€‚*
* ä¸ºäº†æ›´å¥½åœ°è¡¨ç¤ºå¹³å‡æƒ…å†µä¸‹çš„å¤æ‚åº¦ï¼Œæˆ‘ä»¬å¼•å…¥å¦ä¸€ä¸ªæ¦‚å¿µï¼š**å¹³å‡æƒ…å†µæ—¶é—´å¤æ‚åº¦ã€‚**

### å¹³å‡æ—¶é—´å¤æ‚åº¦çš„åˆ†æ

* æŸ¥æ‰¾ä¸€ä¸ªå˜é‡ x åœ¨æ•°ç»„ä¸­çš„ä½ç½®ï¼Œæœ‰ n + 1 ä¸­æƒ…å†µï¼šåœ¨æ•°æ®çš„ 0 ~ n - 1 çš„ä½ç½®å’Œä¸åœ¨æ•°ç»„ä¸­ã€‚
* æˆ‘ä»¬æŠŠæ¯ç§æƒ…å†µä¸‹ï¼ŒæŸ¥æ‰¾éœ€è¦éå†çš„å…ƒç´ ä¸ªæ•°ç´¯åŠ èµ·æ¥ï¼Œå†é™¤ä»¥ n + 1ï¼Œå°±å¯ä»¥å¾—åˆ°éœ€è¦éå†çš„å…ƒç´ ä¸ªæ•°çš„å¹³å‡æ•°ã€‚å³ä¸‹å›¾ï¼š

![[å¹³å‡æ—¶é—´å¤æ‚åº¦é”™è¯¯æ¨å¯¼è¿‡ç¨‹ç¤ºæ„.png]]

* æ ¹æ®å¤§ O è¡¨ç¤ºæ³•ï¼Œå¯ä»¥å¿½ç•¥ç³»æ•°ï¼Œå› æ­¤è¿™ä¸ªå…¬å¼è®¡ç®—çš„ç»“æœæ¨å¯¼å‡ºçš„æ—¶é—´å¤æ‚åº¦å°±æ˜¯ `O(n)`.
* è¿™ä¸ªç»“è®ºè™½ç„¶æ­£ç¡®ï¼Œä½†æ˜¯*æ¨å¯¼è¿‡ç¨‹æ˜¯ä¸æ­£ç¡®çš„*ã€‚*å› ä¸ºä¸Šæ–‡ä¸­çš„ n + 1 ç§æƒ…å†µçš„æ¦‚ç‡ä¸æ˜¯å‡ç­‰çš„ã€‚*
* æ ¹æ®æ¦‚ç‡è®ºï¼Œx å‡ºç°åœ¨æ•°ç»„ä¸­å’Œä¸åœ¨æ•°ç»„ä¸­çš„æ¦‚ç‡å¯ä»¥è¿‘ä¼¼ç†è§£ä¸ºå¯¹ç­‰ï¼Œä¹Ÿå°±æ˜¯éƒ½ä¸º 1/2. è€Œåœ¨æ•°ç»„ä¸­çš„æ¯ä¸ªä½ç½®çš„æ¦‚ç‡éƒ½æ˜¯ç›¸ç­‰çš„ï¼Œè¿™ä¸ªæ¯”è¾ƒå®¹æ˜“ç†è§£ã€‚
* æˆ‘ä»¬å¯ä»¥ç®€å•æŠŠç»“æœæ˜¯å¦åœ¨æ•°ç»„ä¸­çš„å¯èƒ½æ€§éƒ½å½“æˆæ˜¯ 1/2, åœ¨æ•°ç»„å†…çš„æœ‰ n ä¸ªæ•°ï¼Œä¹˜ä»¥ 1/2ï¼›ä¸åœ¨æ•°ç»„å†…çš„åˆ™å°±æ˜¯ 1/2, ä»¥è¿™ä¸ªä¸ºåŸºç¡€å»è®¡ç®—å°±ä¼šå¾—åˆ°ä¸‹å›¾ï¼š

![[å¹³å‡æ—¶é—´å¤æ‚åº¦.png]]

* è¿™ä¸ªå¾—åˆ°çš„ `(3n+1)/4` å…¶å®å°±æ˜¯æ¦‚ç‡è®ºä¸­çš„**åŠ æƒå¹³å‡å€¼**ï¼Œä¹Ÿå«ä½œ**æœŸæœ›å€¼**ã€‚å› æ­¤å¹³å‡æ—¶é—´å¤æ‚åº¦çš„å…¨ç§°å®é™…ä¸Šæ˜¯**åŠ æƒå¹³å‡æ—¶é—´å¤æ‚åº¦**æˆ–è€…**æœŸæœ›æ—¶é—´å¤æ‚åº¦**ã€‚
* åœ¨å»é™¤æ— å…³çš„ç³»æ•°ä¹‹åï¼Œæ‰€å¾—åˆ°çš„çš„å¹³å‡æ—¶é—´å¤æ‚åº¦ä¹Ÿå°±æ˜¯ `O(n)`ã€‚å’Œä¸Šé¢çš„ç»“æœä¸€æ ·ã€‚
* **åŒä¸€å—ä»£ç ï¼Œåœ¨ä¸åŒçš„åœºæ™¯ä¸‹ï¼Œæ—¶é—´å¤æ‚åº¦æœ‰é‡çº§çš„å·®è·ï¼Œæ‰ä¼šä½¿ç”¨ä»¥ä¸Šä¸‰ç§å¤æ‚åº¦è¡¨ç¤ºæ³•æ¥åŒºåˆ†ã€‚** é€šå¸¸æƒ…å†µä¸‹ä¸ä¼šå…¨éƒ¨éƒ½åŒºåˆ†ã€‚

## å‡æ‘Šæ—¶é—´å¤æ‚åº¦

* å¯¹åº”çš„åˆ†ææ–¹æ³•å«**æ‘Šè¿˜åˆ†æï¼ˆåˆå«å¹³æ‘Šåˆ†æï¼‰**ï¼›å®ƒçš„åº”ç”¨åœºæ™¯æ¯”å¹³å‡æ—¶é—´å¤æ‚åº¦åˆ†æçš„åœºæ™¯æ›´åŠ ç‰¹æ®Šï¼Œæ›´åŠ æœ‰é™ã€‚
* ä¸‹é¢æ˜¯ä¸€ä¸ªæ¡ˆä¾‹ï¼Œå®é™…ä¸­å¹¶ä¸å¸¸è§ï¼Œè¿™é‡Œåªæ˜¯ä¸ºäº†åˆ†æ:

```typescript
let arr = new Array(100); // è¿™é‡Œçš„ 100 ä¹Ÿå¯ä»¥æ˜¯å¾ˆå¤§çš„æ•°
let count = 0;
function insert(val: number): void {
  if (count === arr.length) {
    let sum = 0;
    for (let i = 0; i < arr.length; i++) {
      sum += arr[i];
    }
    arr[0] = sum;
    count = 1;
  }
  arr[count] = val;
  ++count;
}
```

* å‡è®¾æ•°ç»„çš„é•¿åº¦ä¸º nï¼Œæ ¹æ®æ•°æ®æ’å…¥çš„ä½ç½®çš„ä¸åŒï¼Œå¯ä»¥åˆ†ä¸º n ç§æƒ…å†µï¼Œæ¯ç§æƒ…å†µå¯¹åº”çš„å¤æ‚åº¦æ˜¯ `O(1)`.
* é™¤æ­¤ä¹‹å¤–ï¼Œæ•°ç»„æ²¡æœ‰ç©ºé—²ç©ºé—´æ’å…¥æ•°æ®çš„åœºæ™¯ï¼Œè¿™ä¸ªæ—¶å€™æ—¶é—´å¤æ‚åº¦æ˜¯ `O(n)`.
* è¿™ n + 1 ç§æƒ…å†µå‘ç”Ÿçš„æ¦‚ç‡æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯ `1/(n + 1)`, æ ¹æ®åŠ æƒå¹³å‡çš„è®¡ç®—æ–¹æ³•ï¼Œå¯ä»¥è¿™ä¹ˆç®—ï¼š

![[å‡æ‘Š-åŠ æƒå¹³å‡ç®—æ³•.png]]
* å»æ‰ç³»æ•°ä¹‹åï¼Œç­”æ¡ˆå°±æ˜¯ `O(1)`.
* è§‚å¯Ÿè¿™ä¸ªæ¡ˆä¾‹å’Œä¸Šé¢ `find` æ¡ˆä¾‹çš„ä¸åŒå¯ä»¥å‘ç°ï¼š
	* `find()` å‡½æ•°åœ¨æç«¯æƒ…å†µä¸‹ï¼Œå¤æ‚åº¦æ‰ä¸º `O(1)`ã€‚ä½† `insert()` åœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œæ—¶é—´å¤æ‚åº¦éƒ½ä¸º `O(1)`ã€‚åªæœ‰ä¸ªåˆ«æƒ…å†µä¸‹ï¼Œå¤æ‚åº¦æ‰æ¯”è¾ƒé«˜ï¼Œä¸º `O(n)`ã€‚è¿™æ˜¯ `insert()` ç¬¬ä¸€ä¸ªåŒºåˆ«äº `find()` çš„åœ°æ–¹ã€‚
	* å¯¹äº `insert()` å‡½æ•°æ¥è¯´ï¼Œ`O(1)` æ—¶é—´å¤æ‚åº¦çš„æ’å…¥å’Œ `O(n)` æ—¶é—´å¤æ‚åº¦çš„æ’å…¥ï¼Œå‡ºç°çš„é¢‘ç‡æ˜¯éå¸¸æœ‰è§„å¾‹çš„ï¼Œè€Œä¸”æœ‰ä¸€å®šçš„å‰åæ—¶åºå…³ç³»ï¼Œä¸€èˆ¬éƒ½æ˜¯ä¸€ä¸ª `O(n)` æ’å…¥ä¹‹åï¼Œç´§è·Ÿç€ n - 1 ä¸ª `O(1)` çš„æ’å…¥æ“ä½œï¼Œå¾ªç¯å¾€å¤ã€‚
* é’ˆå¯¹è¿™ç§ç‰¹æ®Šåœºæ™¯ï¼Œå°±å¯ä»¥ä½¿ç”¨æ‘Šè¿˜åˆ†ææ³•ï¼Œ**æ‘Šè¿˜åˆ†ææ³•å¾—åˆ°æ—¶é—´å¤æ‚åº¦ç§°ä¹‹ä¸ºå‡æ‘Šæ—¶é—´å¤æ‚åº¦ã€‚**
	* æ¯ä¸€æ¬¡ `O(n)` çš„æ’å…¥æ“ä½œï¼Œéƒ½ä¼šè·Ÿç€ `n - 1` æ¬¡ `O(1)` çš„æ’å…¥æ“ä½œï¼Œæ‰€ä»¥æŠŠè€—æ—¶å¤šçš„é‚£æ¬¡æ“ä½œå‡æ‘Šåˆ°æ¥ä¸‹æ¥çš„ `n - 1` æ¬¡è€—æ—¶å°‘çš„æ“ä½œä¸Šï¼Œå‡æ‘Šä¸‹æ¥ï¼Œè¿™ä¸€ç»„è¿ç»­çš„æ“ä½œçš„å‡æ‘Šæ—¶é—´å¤æ‚åº¦å°±æ˜¯ `O(1)`ã€‚

### å‡æ‘Šæ—¶é—´å¤æ‚åº¦çš„åº”ç”¨åœºæ™¯

* **å¯¹ä¸€ä¸ªæ•°æ®ç»“æ„è¿›è¡Œä¸€ç»„è¿ç»­æ“ä½œï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹çš„æ—¶é—´å¤æ‚åº¦éƒ½å¾ˆä½ï¼Œåªæœ‰ä¸ªåˆ«æƒ…å†µä¸‹æ—¶é—´å¤æ‚åº¦æ¯”è¾ƒé«˜ï¼Œä¸”è¿™äº›æ“ä½œå­˜åœ¨å‰åè¿è´¯çš„æ—¶åºå…³ç³»ï¼Œè¿™æ—¶å°±å¯ä»¥ä½¿ç”¨å‡æ‘Šæ—¶é—´å¤æ‚åº¦æ¥åˆ†æã€‚**
* **åœ¨èƒ½å¤Ÿåº”ç”¨å‡æ‘Šæ—¶é—´å¤æ‚åº¦åˆ†æçš„åœºæ™¯ä¸­ï¼Œä¸€èˆ¬å‡æ‘Šæ—¶é—´å¤æ‚åº¦å°±ç­‰äºæœ€å¥½æƒ…å†µæ—¶é—´å¤æ‚åº¦ã€‚**
* *åœ¨æœ¬è¯¾ç¨‹çš„ä½œè€…çœ¼é‡Œï¼Œå‡æ‘Šæ—¶é—´å¤æ‚åº¦å°±æ˜¯ä¸€ç§ç‰¹æ®Šçš„å¹³å‡æƒ…å†µæ—¶é—´å¤æ‚åº¦ã€‚* è¿™ç‚¹å¾…è€ƒè¯ã€‚
	* æš‚ä¸”å°è¯•è¿™æ ·ç†è§£ï¼šğŸ’­
		* å¹³å‡æƒ…å†µæ—¶é—´å¤æ‚åº¦ï¼šè€ƒè™‘æ‰€æœ‰æƒ…å†µï¼›
		* å‡æ‘Šæ—¶é—´å¤æ‚åº¦ï¼šè€ƒè™‘å•ä¸ªå‘¨æœŸã€‚

## æ‰©å±•

* è¯·åˆ†æä¸‹é¢çš„ `add` å‡½æ•°çš„æ—¶é—´å¤æ‚åº¦ã€‚

```java
// å…¨å±€å˜é‡ï¼Œå¤§å°ä¸º10çš„æ•°ç»„arrayï¼Œé•¿åº¦lenï¼Œä¸‹æ ‡iã€‚
int array[] = new int[10]; 
int len = 10;
int i = 0;

// å¾€æ•°ç»„ä¸­æ·»åŠ ä¸€ä¸ªå…ƒç´ 
void add(int element) {
 if (i >= len) { // æ•°ç»„ç©ºé—´ä¸å¤Ÿäº†
	 // é‡æ–°ç”³è¯·ä¸€ä¸ª2å€å¤§å°çš„æ•°ç»„ç©ºé—´
	 int new_array[] = new int[len*2];
	 // æŠŠåŸæ¥arrayæ•°ç»„ä¸­çš„æ•°æ®ä¾æ¬¡copyåˆ°new_array
	 for (int j = 0; j < len; ++j) {
		 new_array[j] = array[j];
	 }
	 // new_arrayå¤åˆ¶ç»™arrayï¼Œarrayç°åœ¨å¤§å°å°±æ˜¯2å€lenäº†
	 array = new_array;
	 len = 2 * len;
 }
 // å°†elementæ”¾åˆ°ä¸‹æ ‡ä¸ºiçš„ä½ç½®ï¼Œä¸‹æ ‡iåŠ ä¸€
 array[i] = element;
 ++i;
}
```

* æœ€å¥½æ—¶é—´å¤æ‚åº¦æ˜¯ `O(1)`, æœ€åæ—¶é—´å¤æ‚åº¦æ˜¯ `O(n)`, å‡æ‘Šæ—¶é—´å¤æ‚åº¦æ˜¯ `O(1)`.
* è®¡ç®—åŠ æƒæ—¶é—´å¤æ‚åº¦ï¼š
	* `1 * (1 / n + 1) + 1 * (1 / n + 1) + ... + 1 * (1 / n + 1) + n * (n + 1) = 1`
	* å¾—åˆ°è®¡ç®—ç»“æœ `O(1)`.
* è®¡ç®—å‡æ‘Šæ—¶é—´å¤æ‚åº¦ï¼š
	* å‰ n ä¸ªæ“ä½œçš„æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯ `O(1)`, ç¬¬ n + 1 æ¬¡æ“ä½œçš„æ—¶é—´å¤æ‚åº¦æ˜¯ `O(n)`, æŠŠæœ€åä¸€æ¬¡æ“ä½œå‡æ‘Šåˆ°å‰é¢ n æ¬¡ï¼Œç»“è®ºå°±æ˜¯ `O(1)` çš„æ—¶é—´å¤æ‚åº¦ã€‚

#ALG 